"use strict";(self.webpackChunkAMS=self.webpackChunkAMS||[]).push([[716],{7716:(F,C,a)=>{a.r(C),a.d(C,{DashboardModule:()=>s});var M=a(6814),c=a(1896),t=a(8547),e=a(5879),O=a(7700),m=a(2404),v=a(9157),g=a(2032),_=a(6385),b=a(5940),x=a(5195),h=a(8034),u=a(6223);function A(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e._UZ(2,"img",4),e.TgZ(3,"p",5),e._uU(4,"Upload your Excel sheet to begin the analysis. Make sure your file contains the required data for processing"),e.qZA(),e.TgZ(5,"button",6),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.uploadSchedule())}),e._uU(6,"Upload File"),e.qZA()()()}}function f(i,o){if(1&i&&(e.TgZ(0,"div",2)(1,"div",7),e._UZ(2,"mat-spinner",8),e.TgZ(3,"p",9),e._uU(4),e.qZA()()()),2&i){const n=e.oxw();e.xp6(4),e.Oqu(n.messages[n.currentMessageIndex])}}function p(i,o){if(1&i){const n=e.EpF();e.TgZ(0,"div")(1,"div",10)(2,"h3",11),e._uU(3,"Dashboard"),e.qZA(),e.TgZ(4,"mat-form-field",12)(5,"mat-label"),e._uU(6,"Choose a date"),e.qZA(),e.TgZ(7,"input",13),e.NdJ("ngModelChange",function(r){e.CHM(n);const d=e.oxw();return e.KtG(d.scheduleDate=r)})("dateChange",function(r){e.CHM(n);const d=e.oxw();return e.KtG(d.dataChange(r))}),e.qZA(),e._UZ(8,"mat-datepicker-toggle",14)(9,"mat-datepicker",null,15),e.qZA(),e.TgZ(11,"button",16),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.uploadSchedule())}),e._uU(12,"Upload File"),e.qZA()(),e.TgZ(13,"div",17)(14,"mat-card",18)(15,"div")(16,"span",19),e._UZ(17,"img",20),e.TgZ(18,"span",21),e._uU(19),e.qZA()()(),e.TgZ(20,"div")(21,"span",22),e._uU(22,"Airlines Operated"),e.qZA(),e._UZ(23,"mat-divider",23),e.qZA()(),e.TgZ(24,"mat-card",18)(25,"div")(26,"span",19),e._UZ(27,"img",24),e.TgZ(28,"span",21),e._uU(29),e.qZA()()(),e.TgZ(30,"div")(31,"span",22),e._uU(32,"Airways Movements"),e.qZA(),e._UZ(33,"mat-divider",23),e.qZA()(),e.TgZ(34,"mat-card",18)(35,"div")(36,"span",19),e._UZ(37,"img",25),e.TgZ(38,"span",21),e._uU(39),e.qZA()()(),e.TgZ(40,"div")(41,"span",22),e._uU(42,"Pax Handling Total"),e.qZA(),e._UZ(43,"mat-divider",23),e.qZA()()()()}if(2&i){const n=e.MAs(10),l=e.oxw();e.xp6(7),e.Q6J("matDatepicker",n)("ngModel",l.scheduleDate),e.xp6(1),e.Q6J("for",n),e.xp6(11),e.Oqu(l.airlinesCount),e.xp6(10),e.Oqu(l.schedulesCount),e.xp6(10),e.Oqu(l.noOfSeatsCount)}}const Z=[{path:"",component:(()=>{class i{constructor(n,l,r){this.dialog=n,this.router=l,this.scheduleUploadService=r,this.onLoadAnimation=!0,this.scheduleExist=!1,this.messages=["Document uploaded successfully...","Analysing the Data, please wait...","Generating the result..."],this.currentMessageIndex=0,this.scheduleDate=(new Date).toISOString().split("T")[0],this.onloadData=!1,this.selectedDate="",this.scheduleUploadService.isScheduleDataExist().subscribe(d=>{this.scheduleExist=d.data_exists,this.scheduleUploadService.scheduleUploadSubject.next(d.data_exists),this.onLoadAnimation=!1,this.selectedDate=this.scheduleDate,d.data_exists&&this.scheduleUploadService.getScheduleHightlights(this.selectedDate).subscribe(D=>{let y=D.respayload;this.airlinesCount=y.airlines,this.schedulesCount=y.schedules,this.noOfSeatsCount=y.noOfSeats,this.scheduleDate=y.current_date,this.onLoadAnimation=!1})})}loadMessagesOneByOne(){this.currentMessageIndex<this.messages.length-1&&setTimeout(()=>{this.currentMessageIndex++,this.loadMessagesOneByOne()},7e3)}dataChange(n){const l=n.value;if(l){const r=l.getFullYear(),d=this.twoDigitFormat(l.getMonth()+1),D=this.twoDigitFormat(l.getDate());this.formateDate=`${r}-${d}-${D}`,console.log("formattedDate",this.formateDate),this.scheduleUploadService.getScheduleHightlights(this.formateDate).subscribe(k=>{let S=k.respayload;this.airlinesCount=S.airlines,this.schedulesCount=S.schedules,this.noOfSeatsCount=S.noOfSeats})}}uploadSchedule(){this.dialog.open(t.V,{width:"650px",height:"650px",panelClass:"myClass",data:{componentType:"scheduleUpload",edit:!1}}).afterClosed().subscribe(n=>{!0!==n.save?(this.onLoadAnimation=!1,this.loadMessagesOneByOne()):(this.onLoadAnimation=!0,this.scheduleUploadService.getScheduleHightlights(this.selectedDate).subscribe(l=>{if(!0===l.success){this.onLoadAnimation=!1,this.scheduleExist=!0,this.scheduleUploadService.scheduleUploadSubject.next(!0);let r=l.respayload;this.airlinesCount=r.airlines,this.schedulesCount=r.schedules,this.noOfSeatsCount=r.noOfSeats,this.scheduleDate=r.current_date}}))})}twoDigitFormat(n){return n.toString().padStart(2,"0")}}return i.\u0275fac=function(n){return new(n||i)(e.Y36(O.uw),e.Y36(c.F0),e.Y36(m.v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-dashboard"]],decls:3,vars:3,consts:[["class","dashboard-bg container",4,"ngIf"],[4,"ngIf"],[1,"dashboard-bg","container"],[1,"upload-container"],["src","https://testimagestore.blob.core.windows.net/assets/Upload svg.svg",1,"upload-img"],[1,"upload-description"],[1,"upload-btn",3,"click"],[1,"loading-spinner-container"],[1,"spinner"],[2,"margin-top","4%"],[1,"date-and-upload"],[1,"Dashoboard-heading",2,"justify-content","flex-start"],["appearance","outline"],["matInput","",3,"matDatepicker","ngModel","ngModelChange","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"upload-btn",2,"height","53px","width","16%",3,"click"],[1,"card-container"],[1,"w-30"],[2,"display","flex"],["src","https://testimagestore.blob.core.windows.net/assets/Airlines operated.svg",1,"dash-hightlight-img"],[1,"highlight-value"],[1,"mat-content"],[1,"divider"],["src","https://testimagestore.blob.core.windows.net/assets/Airways Movements.svg",1,"dash-hightlight-img"],["src","https://testimagestore.blob.core.windows.net/assets/Pax Handling.svg",1,"dash-hightlight-img"]],template:function(n,l){1&n&&(e.YNc(0,A,7,0,"div",0),e.YNc(1,f,5,1,"div",0),e.YNc(2,p,44,6,"div",1)),2&n&&(e.Q6J("ngIf",!l.scheduleExist&&!l.onLoadAnimation),e.xp6(1),e.Q6J("ngIf",l.onLoadAnimation),e.xp6(1),e.Q6J("ngIf",l.scheduleExist&&!l.onLoadAnimation))},dependencies:[M.O5,v.KE,v.hX,v.R9,g.Nt,_.d,b.Ou,x.a8,h.Mq,h.hl,h.nW,u.Fj,u.JJ,u.On],styles:[".dashboard-bg[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;margin:0;background-color:#fbfbfb}.dashboard-bg[_ngcontent-%COMP%]   .upload-img[_ngcontent-%COMP%]{width:252px;height:254px}.dashboard-bg[_ngcontent-%COMP%]   .upload-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;align-items:center;gap:32px}.dashboard-bg[_ngcontent-%COMP%]   .upload-description[_ngcontent-%COMP%]{text-align:center;font-family:Mulish;font-size:18px;font-style:normal;font-weight:500;line-height:28px;width:580px;color:#7a7a7a}.upload-btn[_ngcontent-%COMP%]{display:flex;height:48px;padding:12px 40px;justify-content:center;align-items:center;gap:12px;cursor:pointer;color:#fff;border-radius:4px;border:none;background-color:#5172ed}.date-and-upload[_ngcontent-%COMP%]{display:flex;gap:2%;margin-top:3%;justify-content:flex-end;margin-right:2%}.myClass[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{margin:0;color:#0ff}.loading-spinner-container[_ngcontent-%COMP%]{align-items:center;justify-content:center}.spinner[_ngcontent-%COMP%]{width:80px;height:80px;margin-left:24px;margin-bottom:25px;--mdc-circular-progress-size: 100px;--mdc-circular-progress-active-indicator-width: 100px}.card-container[_ngcontent-%COMP%]{display:flex;margin-top:3%;align-items:center;justify-content:center;gap:3%}.mat-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-bottom:10%;color:var(--neutral-200, #666);font-family:Mulish;font-size:16px;font-style:normal;font-weight:500;line-height:24px}.dash-hightlight-img[_ngcontent-%COMP%]{width:15%;margin-left:5%;margin-top:7%;display:inline-block}.highlight-value[_ngcontent-%COMP%]{margin-top:8%;margin-left:3%;color:#3d3d3d;font-family:Urbanist;font-size:32px;font-style:normal;font-weight:600;line-height:28px;letter-spacing:1.92px}.divider[_ngcontent-%COMP%]{width:78%;margin-left:11%;margin-bottom:9%}.Dashoboard-heading[_ngcontent-%COMP%]{font-family:Mulish;font-weight:700;display:flex;float:left;position:absolute;left:3%}.mat-footer-content[_ngcontent-%COMP%]{color:var(--neutral-200, #666);font-family:Mulish;font-size:12px;font-style:normal;font-weight:400;line-height:16px}.w-30[_ngcontent-%COMP%]{width:30%}"]}),i})()}];let U=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(Z),c.Bz]}),i})();var T=a(698),w=a(6652),P=a(4104);let s=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[M.ez,U,T.m,w.q,O.Is,u.UX,u.u5,P.Nh]}),i})()},8547:(F,C,a)=>{a.d(C,{V:()=>P});var M=a(8645),c=a(7700),t=a(5879),e=a(6814),O=a(2754),m=a(9038),v=a(6385),g=a(2296),_=a(3814),b=a(6223);function x(s,i){if(1&s&&t._UZ(0,"img",18),2&s){const o=t.oxw().$implicit;t.Q6J("src",o.airline_logo,t.LSH)}}function h(s,i){if(1&s&&(t.TgZ(0,"mat-list-option",15)(1,"div",16)(2,"div"),t._uU(3),t.qZA(),t._UZ(4,"span",3),t.TgZ(5,"div"),t.YNc(6,x,1,1,"img",17),t.qZA()()()),2&s){const o=i.$implicit;t.Q6J("value",o.id_airline),t.xp6(3),t.hij(" ",o.airline_name," "),t.xp6(3),t.Q6J("ngIf",o.airline_logo)}}let u=(()=>{class s{constructor(o,n,l){this.airlineWiseMovementService=o,this.data=n,this.dialogRef=l,this.airlines_list=[],this.selectedAirlines=["all"],this.airlineWiseMovementService.getAirlines(),this.airlineWiseMovementService.getAirlineListener().subscribe(r=>{this.airlines_list=r.airlines,this.data.airlinesSelected.length&&(this.selectedAirlines=this.data.airlinesSelected.map(d=>d.id_airline))})}ngOnInit(){}airlineSelected(o,n){let l=n.selectedOptions.selected.map(r=>r.value);"all"===o.options[0].value?this.selectedAirlines=["all"]:l.length>1&&l.includes("all")&&(this.selectedAirlines=[...l.filter(r=>"all"!==r)])}apply(){this.selectedAirlines=this.selectedAirlines.filter(n=>"all"!==n.airline_name);let o=this.airlines_list.filter(n=>this.selectedAirlines.includes(n.id_airline));this.dialogRef.close({save:!0,airlines:o})}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(O.Y),t.Y36(c.WI),t.Y36(c.so))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-airlines-filter"]],decls:20,vars:2,consts:[[1,"airlines-modal"],["mat-dialog-title","","fxLayout","row","fxLayoutAlign","start center",1,"mat-typography"],["fxFlex","initial",1,"header"],["fxFlex","auto"],["mat-dialog-close","",1,"close-button","cursor-pointer"],["src","../https://testimagestore.blob.core.windows.net/assets/close-circle.svg","alt",""],[1,"-mx-24"],["mat-dialog-content",""],[1,"ams-selection-list",3,"ngModel","ngModelChange","selectionChange"],["airlines",""],["togglePosition","before","value","all"],["togglePosition","before",3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","align","end",1,"action-buttons"],["mat-button","","mat-dialog-close","",1,"cancel-button"],["mat-stroked-button","",1,"apply-filter-button",3,"click"],["togglePosition","before",3,"value"],["fxFlex","row"],["alt","",3,"src",4,"ngIf"],["alt","",3,"src"]],template:function(o,n){if(1&o){const l=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3,"Choose Airlines"),t.qZA(),t._UZ(4,"span",3),t.TgZ(5,"button",4),t._UZ(6,"img",5),t.qZA()(),t._UZ(7,"mat-divider",6),t.TgZ(8,"div",7)(9,"mat-selection-list",8,9),t.NdJ("ngModelChange",function(d){return n.selectedAirlines=d})("selectionChange",function(d){t.CHM(l);const D=t.MAs(10);return t.KtG(n.airlineSelected(d,D))}),t.TgZ(11,"mat-list-option",10),t._uU(12,"All"),t.qZA(),t.YNc(13,h,7,3,"mat-list-option",11),t.qZA()(),t._UZ(14,"mat-divider",6),t.TgZ(15,"div",12)(16,"button",13),t._uU(17,"Cancel"),t.qZA(),t.TgZ(18,"button",14),t.NdJ("click",function(){return n.apply()}),t._uU(19,"Apply Filter"),t.qZA()()()}2&o&&(t.xp6(9),t.Q6J("ngModel",n.selectedAirlines),t.xp6(4),t.Q6J("ngForOf",n.airlines_list))},dependencies:[e.sg,e.O5,m.Ub,m.vS,v.d,c.ZT,c.uh,c.xY,c.H8,g.lW,_.xw,_.Wh,_.yH,b.JJ,b.On],styles:[".header[_ngcontent-%COMP%]{font-weight:500}.airlines-modal[_ngcontent-%COMP%]{padding:2em}.action-buttons[_ngcontent-%COMP%]{margin-top:1em;margin-bottom:1em}.close-button[_ngcontent-%COMP%]{background:transparent;border:0px;margin-bottom:14px}.action-buttons[_ngcontent-%COMP%]   .apply-filter-button[_ngcontent-%COMP%]{background-color:#5865f2;border-radius:4px;color:#fff;font-weight:400}.action-buttons[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{margin-right:1em;width:45px;border-radius:4px;font-weight:400;background:#E8E8E8}img[_ngcontent-%COMP%]{display:block;width:19%;float:right}.ams-selection-list[_ngcontent-%COMP%]     mat-list-option .mdc-list-item__start .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background, .ams-selection-list[_ngcontent-%COMP%]     mat-list-option .mdc-list-item__start .mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background, .ams-selection-list[_ngcontent-%COMP%]     mat-list-option .mdc-list-item__start .mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{background-color:var(--ams-checkbox)!important;border-color:var(--ams-checkbox)!important}.ams-selection-list[_ngcontent-%COMP%]     mat-list-option .mdc-list-item__start .mdc-checkbox .mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--ams-white)}"]}),s})();var A=a(3637);function f(s,i){1&s&&t.GkF(0)}const p=function(s){return{data:s}};function W(s,i){if(1&s&&(t.ynx(0),t.YNc(1,f,1,0,"ng-container",4),t.BQk()),2&s){const o=t.oxw(),n=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,p,o.parseData))}}function Z(s,i){1&s&&t.GkF(0)}function U(s,i){if(1&s&&(t.ynx(0),t.YNc(1,Z,1,0,"ng-container",4),t.BQk()),2&s){const o=t.oxw(),n=t.MAs(6);t.xp6(1),t.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",t.VKq(2,p,o.parseData))}}function T(s,i){1&s&&t._UZ(0,"app-schedule-upload-modal",5),2&s&&t.Q6J("dataFromParent",i.data)}function w(s,i){1&s&&t._UZ(0,"app-airlines-filter")}let P=(()=>{class s{constructor(o,n){this.dialogRef=o,this.data=n,this.dialog_subject=new M.x,this.changeDetection="",this.close=()=>{this.dialogRef.close({data:this.parseData,available:this.parseData.sharedData})},this.parseData=n,this.dialog_subject.asObservable(),this.dialog_subject.subscribe(l=>{this.parseData=l,this.changeDetection=l.updateValue})}ngAfterViewInit(){throw new Error("Method not implemented.")}ngOnInit(){throw new Error("Method not implemented.")}}return s.\u0275fac=function(o){return new(o||s)(t.Y36(c.so),t.Y36(c.WI))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-modal-window"]],decls:7,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],["scheduleUpload",""],["airlines_filter",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"dataFromParent"]],template:function(o,n){1&o&&(t.ynx(0,0),t.YNc(1,W,2,4,"ng-container",1),t.YNc(2,U,2,4,"ng-container",1),t.BQk(),t.YNc(3,T,1,1,"ng-template",null,2,t.W1O),t.YNc(5,w,1,0,"ng-template",null,3,t.W1O)),2&o&&(t.Q6J("ngSwitch",n.parseData.componentType),t.xp6(1),t.Q6J("ngSwitchCase","scheduleUpload"),t.xp6(1),t.Q6J("ngSwitchCase","airlines-filter"))},dependencies:[e.tP,e.RF,e.n9,u,A.A]}),s})()},2754:(F,C,a)=>{a.d(C,{Y:()=>O});var M=a(9413),c=a(8645),t=a(5879),e=a(9862);let O=(()=>{class m{constructor(g){this.http=g,this.baseURL=M.N.apiUrl+"/schedule",this.airlineWiseMovementUpdateListenerObservable=new c.x,this.airlineObservable=new c.x}getAirlineWiseMovement(g,_,b){let x;return x=_&&b?{airline_id:g,valid_from:_,valid_to:b}:{airline_id:g},this.http.get(this.baseURL+"/getscheduleairlines",{params:{...x}}).subscribe(h=>{let u={airline_name:"Total",arrival_count:h.respayload.reduce((f,p)=>p.arrival_count+f,0),departure_count:h.respayload.reduce((f,p)=>p.departure_count+f,0),overnight_parking_count:h.respayload.reduce((f,p)=>p.overnight_parking_count+f,0)},A=h.respayload;A.push(u),this.airlineWiseMovementUpdateListenerObservable.next({success:h.success,message:h.message,airlinesData:A})})}getAirlines(){return this.http.get(this.baseURL+"/getairlines").subscribe(g=>{this.airlineObservable.next({success:g.success,airlines:g.respayload,message:g.message})})}getAirlineWiseMovementUpdateListener(){return this.airlineWiseMovementUpdateListenerObservable.asObservable()}getAirlineListener(){return this.airlineObservable.asObservable()}}return m.\u0275fac=function(g){return new(g||m)(t.LFG(e.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);